cache deny all

logfile_rotate 5
coredump_dir /dev/null

http_port {{ proxy_port | default(3128) }}

acl SSL_ports port 443
acl Safe_ports port 80		# http
acl Safe_ports port 21		# ftp
acl Safe_ports port 443		# https

acl CONNECT method CONNECT

{% for source in allow_nets %}
acl {{ source.name }} src {{ source.net }}
http_access allow {{ source.name }}
{% endfor %}

http_access deny !Safe_ports
http_access allow CONNECT all
http_access allow localhost manager
http_access deny manager
http_access allow localhost
http_access deny all